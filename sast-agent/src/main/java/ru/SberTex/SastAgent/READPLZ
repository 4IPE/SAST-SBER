1)Я поменял структуру, агента не трогал
    Объясняю, как я поменял
    Теперь я создаю  ReportDto в сервисе и передаю его вместе с ProjectDto
    В нем есть статус
    Когда агент принимает данный объект без ошибок и начинает его обработку ,то ты через RestTemplate должен отправить объект
    со статусом RUN то есть тебе останется только поменять статус и отправить его
    После окончания вместе с объектом ProjectOutDto отправляешь ReportOutDto со статусом DONE/ERROR

2)И в этой ветке сразу же код разнеси по методам не большим